# 移植基本方針

## 目的
JR-100 エミュレーターの Python 版は、`reference/jr100-emulator-v2` にある Java 実装のロジックとステートマシンを忠実に再現し、挙動を一致させることを最優先とする。機能追加や独自仕様は Java 版と同等性が確保されるまで行わない。

## 実装ルール
- クラス構造や状態遷移は Java 版のパッケージ構成を基準に Python パッケージへ写像する。
- メソッド単位で Java 版の処理を移し、命名を snake_case に変換した上で元のメソッド名をコメントに残す。
- ロジックの改変が必要な場合は Java 側の理由をソースコメントに引用し、差異の根拠を明文化する。
- 外部依存が Java 固有の場合のみ Pygame 等の代替 API を使用し、入出力結果は Java 版と同じ見た目・タイミングを維持する。

## 進捗管理
- 主要コンポーネント (CPU, VIA, メモリ, I/O, デバッガ) ごとに移植完了チェックリストを作成し、差分が残る箇所を明記する。
- コミットメッセージには対応する Java ファイルとメソッドを列挙し、完全移植済みか部分移植かをタグ化する。
- `/compact` などの履歴圧縮コマンドを利用した場合でも本ドキュメントとチェックリストを更新し、方針を失わないようにする。

## 参考資料
- 元リポジトリ: https://github.com/kemusiro/jr100-emulator-v2
- JR-100 リファレンス: ハード仕様書、ROM ダンプ (datas/ 配下、非公開)
- テスト戦略: t-wada さんの TDD + ゆもつよメソッド
